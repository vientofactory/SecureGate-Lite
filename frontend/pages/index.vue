<template>
  <v-app>
    <v-parallax src="/images/Empty.png" height="700">
      <!-- particles -->
      <div class="particle particle-1"></div>
      <div class="particle particle-2"></div>
      <div class="d-flex flex-column fill-height justify-center align-center text-white">
        <v-avatar size="120" class="logo-animate">
          <v-img src="/images/SecureGate_Logo.svg" />
        </v-avatar>
        <!-- error message -->
        <v-alert type="warning" v-if="error_param" dismissible>
          {{ error_param }}
        </v-alert>
        <h1 class="brand-title">
          {{ brand }}
        </h1>
        <h1 class="font-weight-bold mb-4 brand-subtitle">
          {{ $t('subtitle') }}
        </h1>
        <div v-if="loading">
          <h4 class="grey--text subheading">
            {{ $t('checking') }}
          </h4>
        </div>
        <div v-else-if="loggedin">
          <h4 class="subheading">
            <v-avatar size="30">
              <v-img class="align-end" :src="getAvatar(user.id, user.avatar)" />
            </v-avatar>
            {{ $t('welcome', { user: user.global_name }) }}
          </h4>
        </div>
        <div v-else>
          <h4 class="subheading">
            {{ $t('status', { guilds: guilds, users: users }) }}
          </h4>
        </div>
        <div class="mt-4 justify-center align-center">
          <div v-if="loggedin">
            <v-btn to="/oauth2/logout">
              <v-icon right>mdi-logout-variant</v-icon>
              {{ $t('logout') }}
            </v-btn>
            <v-btn color="primary" to="/dashboard">
              <v-icon right>mdi-view-dashboard</v-icon>
              {{ $t('dashboard') }}
            </v-btn>
          </div>
          <div v-else-if="!loading">
            <v-btn color="primary" large to="/oauth2/login">
              <v-icon right>mdi-login-variant</v-icon>
              {{ $t('login') }}
            </v-btn>
          </div>
        </div>
      </div>
    </v-parallax>
    <div class="shadow-divider"></div>
    <v-parallax src="/images/Empty.png" height="400">
      <div class="d-flex flex-column fill-height justify-center align-center text-white">
        <h1 class="text-h4 font-weight-bold mb-4">
          <v-icon>mdi-earth</v-icon>
          ì•ˆë…•í•˜ì„¸ìš”! Hello! ã“ã‚“ã«ã¡ã¯ï¼
        </h1>
        <h4 class="subheading">
          Select your language first.
          <selectLang />
        </h4>
      </div>
    </v-parallax>
    <v-parallax src="/images/Empty.png" height="400">
      <div class="d-flex flex-column fill-height justify-center align-center text-white">
        <h1 class="text-h4 font-weight-bold mb-4">
          <v-icon>mdi-check</v-icon>
          {{ $t('hero-1-title') }}
        </h1>
        <h4 class="subheading">
          {{ $t('hero-1-desc') }}
        </h4>
      </div>
    </v-parallax>
    <v-parallax src="/images/Empty.png" height="400">
      <div class="d-flex flex-column fill-height justify-center align-center text-white">
        <h1 class="text-h4 font-weight-bold mb-4">
          <v-icon>mdi-security</v-icon>
          {{ $t('hero-2-title') }}
        </h1>
        <h4 class="subheading">
          {{ $t('hero-2-desc') }}
        </h4>
      </div>
    </v-parallax>
    <v-parallax src="/images/Empty.png" height="400">
      <div class="d-flex flex-column fill-height justify-center align-center text-white">
        <h1 class="text-h4 font-weight-bold mb-4">
          <v-icon>mdi-door-open</v-icon>
          {{ $t('hero-3-title') }}
        </h1>
        <h4 class="subheading">
          {{ $t('hero-3-desc') }}
        </h4>
        <div class="mt-4 justify-center align-center">
          <v-btn color="primary" large to="/official">
            {{ $t('join-btn') }}
          </v-btn>
        </div>
      </div>
    </v-parallax>
    <v-parallax src="/images/Empty.png" height="400">
      <div class="d-flex flex-column fill-height justify-center align-center grey--text">
        <!-- ì‚­ì œ, ìˆ˜ì • ê¸ˆì§€ -->
        <span>
          <a href="https://github.com/vientorepublic/SecureGate-Lite">ì´ í”„ë¡œì íŠ¸ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì…ë‹ˆë‹¤!â¤ï¸</a>
        </span>
        <!------------------>
        <span>
          <nuxt-link to="/License">{{ $t('license') }}</nuxt-link>
        </span>
        <span>
          {{ $t('not-affiliated') }}
        </span>
        <span>This site is protected by reCAPTCHA and the Google
          <a href="https://policies.google.com/privacy">Privacy Policy</a> and
          <a href="https://policies.google.com/terms">Terms of Service</a> apply.
        </span>
      </div>
    </v-parallax>

  </v-app>
</template>

<i18n lang="yaml">
  ko:
    subtitle: "ë””ìŠ¤ì½”ë“œ ì„œë²„ë¥¼ ë”ìš± ì•ˆì „í•˜ê²Œ."
    checking: "ìœ ì € í™•ì¸ì¤‘..."
    welcome: "í™˜ì˜í•©ë‹ˆë‹¤, {user}ë‹˜!"
    status: "í˜„ì¬ {guilds}ê°œì˜ ê¸¸ë“œì™€ {users}ëª…ì˜ ìœ ì €ê°€ ë³´í˜¸ ë°›ê³  ìˆì–´ìš”."
    logout: "ë¡œê·¸ì•„ì›ƒ"
    dashboard: "ëŒ€ì‹œë³´ë“œ"
    login: "ë””ìŠ¤ì½”ë“œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸"
    hero-1-title: "ì‚¬ìš©ì ì¹œí™”ì ì¸ğŸŒ³"
    hero-1-desc: "ë””ìŠ¤ì½”ë“œ ì„œë²„ë¥¼ ì†Œìœ í•˜ê±°ë‚˜ ê´€ë¦¬í•˜ê³  ê³„ì‹ ê°€ìš”? ëª¨ë“  ìœ ì € ì¸ì¦ ë¬¸ì œëŠ” ì €í¬ê°€ í•´ê²°í• ê²Œìš”."
    hero-2-title: "ì—¬ëŸ¬ ì¸ì¦ ë°©ì‹ğŸ”’"
    hero-2-desc: "reCAPTCHA, ì´ë©”ì¼ ì¸ì¦, ì§ˆì˜ì‘ë‹µ, ê´€ë¦¬ì ìŠ¹ì¸ ì¤‘ ììœ ë¡­ê²Œ ì„ íƒí•´ì„œ ì´ˆëŒ€ ë§í¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ì¦ì´ ì™„ë£Œë˜ë©´ ìœ ì €ê°€ ìë™ìœ¼ë¡œ ì„œë²„ì— ì°¸ì—¬í•©ë‹ˆë‹¤."
    hero-3-title: "ì—´ë¦° ì»¤ë®¤ë‹ˆí‹°ğŸ“¢"
    hero-3-desc: "ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”? ì¤‘ìš” ì†Œì‹ì„ ë¹ ë¥´ê²Œ ì „ë‹¬ë°›ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ì—¬ê¸°ë¡œ ì˜¤ì„¸ìš”!"
    join-btn: "ê³µì‹ ë””ìŠ¤ì½”ë“œ ì°¸ì—¬"
    not-affiliated: "DiscordëŠ” Discord Inc.ì˜ ë¸Œëœë“œì´ë©°, ë³¸ ì„œë¹„ìŠ¤ëŠ” Discordì™€ ê´€ë ¨ì´ ì—†ìŠµë‹ˆë‹¤."
    license: "ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ì„ ìŠ¤"
  en:
    subtitle: "Make your Discord server more secure."
    checking: "Checking user..."
    welcome: "Welcome, {user}!"
    status: "Currently, {guilds} guilds and {users} users are protected."
    logout: "Logout"
    dashboard: "Dashboard"
    login: "Login with Discord account"
    hero-1-title: "User friendlyğŸŒ³"
    hero-1-desc: "Do you own or manage a Discord server? We will solve all user authentication issues."
    hero-2-title: "Multiple authentication methodsğŸ”’"
    hero-2-desc: "You can create an invitation link by freely choosing among reCAPTCHA, email authentication, Q&A, and administrator approval. Once authentication is complete, the user automatically joins the server."
    hero-3-title: "Open communityğŸ“¢"
    hero-3-desc: "Need help? Want to receive important news quickly? come here!"
    join-btn: "Join the official Discord"
    not-affiliated: "Discord is a brand of Discord Inc. and this service is not affiliated with Discord."
    license: "Opensource License"
</i18n>

<script>
import selectLang from '../components/selectLang.vue';
export default {
  name: 'IndexPage',
  head: {
    title: 'Main'
  },
  components: {
    selectLang
  },
  data() {
    return {
      error_param: this.$route.query.error,
      brand: process.env.BRAND,
      loading: true,
      loggedin: false,
      user: [],
      guilds: 0,
      users: 0
    }
  },
  mounted() {
    this.getUser();
  },
  methods: {
    getStats: function () {
      this.$axios.get('/api/globalData').then((res) => {
        this.guilds = res.data.guilds;
        this.users = res.data.users;
      }).catch((_err) => { });
    },
    getUser: function () {
      this.$axios.get('/api/user').then((res) => {
        this.loading = false;
        this.loggedin = true;
        this.user = res.data.data;
      }).catch((_err) => {
        this.loading = false;
        this.getStats();
      });
    },
    getAvatar: function (id, name) {
      if (!name) {
        return '/images/default.png';
      } else {
        return `https://cdn.discordapp.com/avatars/${id}/${name}.png`;
      }
    }
  }
}
</script>

<style scoped>
@import '~/static/css/particles.css';

.brand-title {
  opacity: 0;
  font-size: 5rem;
  background: linear-gradient(135deg, #388B87, #6133D4);
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: title_animate 0.5s ease-out 0.5s forwards;
}

.brand-subtitle {
  opacity: 0;
  font-size: 1.5rem;
  animation: subtitle_animate 0.5s ease-out 1s forwards;
}

.logo-animate {
  opacity: 0;
  animation: logo_animate 0.5s ease-in 1.5s forwards;
}

.shadow-divider {
  height: 30px;
  box-shadow: 0px -20px 20px 0px #242424;
}

@keyframes title_animate {
  0% {
    transform: translate(0px, -25px);
    opacity: 0.1;
  }

  100% {
    transform: translate(0px, 0px);
    opacity: 1;
  }
}

@keyframes subtitle_animate {
  0% {
    transform: translate(0px, 25px);
    opacity: 0.1;
  }

  100% {
    transform: translate(0px, 0px);
    opacity: 1;
  }
}

@keyframes logo_animate {
  0% {
    opacity: 0.1;
  }

  100% {
    opacity: 1;
  }
}

@media (max-width: 767px) {
  .brand-title {
    font-size: 50px;
  }

  .brand-subtitle {
    font-size: 1.2rem;
  }
}
</style>